{
  "cosmos-installer": {
    "form": [ 
    {
      "name": "serialPort",
      "label": "serial Port",
      "initialValue": "/dev/ttyACM2",
      "type": "select",
      "options": [
        ["/dev/ttyACM0", "/dev/ttyACM0 -> Serialport 0 -> Coprocessor"],
        ["/dev/ttyACM1", "/dev/ttyACM1 -> Serialport 1 -> KNX, RS485 or RS232"],
        ["/dev/ttyACM2", "/dev/ttyACM2 -> Serialport 2 -> RS485 or RS232"],
        ["/dev/ttyACM3", "/dev/ttyACM3 -> Serialport 3 -> RS485 or RS232"]
      ]
    },
    {
        "name": "baudrate",
        "label": "Baudrate",
        "initialValue": "9600",
        "type": "select",
        "options": [
          ["9600", "9600"],
          ["19200", "19200"],
          ["38400", "38400"],
          ["57600", "57600"],
          ["76800", "76800"],
          ["115200", "115200"]
        ]
      },
      {
        "name": "mode",
        "label": "Mode",
        "initialValue": "8N1",
        "type": "select",
        "options": [
          ["8N1", "8N1: 8 databits, no parity, 1 stoppbit"],
          ["8E1", "8E1: 8 databits, even parity, 1 stoppbit"],
          ["8O1", "8O1: 8 databits, odd parity, 1 stoppbit"],
          ["8N2", "8N2: 8 databits, no parity, 2 stoppbit"]
        ]
      }
    ],
    "translation": {
      "de": {
        "form.mode.label": "Modus",
        "form.mode.options": [
          ["8N1", "8N1: 8 Datenbits, keine Parit채t, 1 Stoppbit"],
          ["8E1", "8E1: 8 Datenbits, gerade Parit채t, 1 Stoppbit"],
          ["8O1", "8O1: 8 Datenbits, ungerade Parit채t, 1 Stoppbit"],
          ["8N2", "8N2: 8 Datenbits, keine Parit채t, 2 Stoppbit"]
        ],
        "form.serialPort.label": "serieller Anschluss",
        "form.serialPort.options": [
          ["/dev/ttyACM0", "/dev/ttyACM0 -> Serieller Anschluss 0 -> Koprocessor"],
          ["/dev/ttyACM1", "/dev/ttyACM1 -> Serieller Anschluss 1 -> KNX, RS485 oder RS232"],
          ["/dev/ttyACM2", "/dev/ttyACM2 -> Serieller Anschluss 2 -> RS485 oder RS232"],
          ["/dev/ttyACM3", "/dev/ttyACM3 -> Serieller Anschluss 3 -> RS485 oder RS232"]
        ]        
      }
    }
  },
  "services": {
    "{ServiceName}": {
      "image": "ghcr.io/aseracorp/mbusd:latest",
      "container_name": "{ServiceName}",
      "restart": "unless-stopped",
      "UID": 1000,
      "GID": 1000,
      "security_opt": [
        "no-new-privileges:true"
      ],
      "labels": {
        "cosmos-force-network-secured": "true",
        "cosmos-auto-update": "true",
        "cosmos-icon": "https://aseracorp.github.io/resiSTORE/servapps/mbusd/icon.png"
      },
      "command": "-d -L - -p /dev/ttyModbus -s {Context.baudrate} -m {Context.mode}",
      "devices": [
        "{Context.serialPort}:/dev/ttyModbus:rwm"
      ],
      "volumes": [
        {
          "source": "{ServiceName}-app",
          "target": "/usr/app",
          "type": "volume"
        }
      ],
      "ports": [
        "502:502"
      ]    }
  }
}